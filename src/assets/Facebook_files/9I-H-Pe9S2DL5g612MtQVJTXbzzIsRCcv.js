if (self.CavalryLogger) { CavalryLogger.start_js_script(document.currentScript); }/*FB_PKG_DELIM*/

__d("MWChatStateV2IsFlyoutOpen.bs",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.openFlyoutWatermark!==0}f.isFlyoutOpen=a}),null);
__d("MWChatHeadPicture.bs",["ix","BaseGlimmer.react","MWChatFacepile.bs","MWChatProfile.bs","TetraIcon.react","fbicon","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");c="pym96oi7-B";var k={withBackground:{backgroundColor:"nred35xi"},chatHeadIntroAnim:{animationDirection:"afxn4irw",animationDuration:"il7rb8sk",animationFillMode:"j1l0snac",animationIterationCount:"h9pa7xm5",animationName:"bnyrfe0q",animationTimingFunction:"mqussk9c"},dropShadow:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",boxShadow:"akv41dx8",":hover":{boxShadow:"eb3gnj61"}},headGlimmer:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",position:"l9j0dhe7",height:"m7zwrmfr",width:"tmrshh9y"},withOverflowBackground:{alignItems:"bp9cbjyn",display:"j83agx80",justifyContent:"taijpn5t",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",height:"m7zwrmfr",width:"tmrshh9y",backgroundColor:"nred35xi"}};function a(a){var c=a.images,d=a.children,e=a.noFacepile;a=a.noDropShadow;e=e!==void 0?e:!1;a=a!==void 0?a:!1;var f=c.length;if(f!==1)if(f!==0)if(e)return j.jsxs("div",{className:(i||(i=b("stylex")))(a?!1:k.dropShadow,k.withOverflowBackground),children:[j.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(g("481920"),24)}),d]});else return j.jsx(b("MWChatFacepile.bs").make,{borderBetweenImages:!1,children:d,firstParticipantURI:c[0],secondParticipantURI:c[1],shadow:!0,size:48});else return j.jsx("div",{className:(i||(i=b("stylex")))(k.withBackground,k.headGlimmer),children:j.jsx(b("BaseGlimmer.react"),{theme:"dark",index:1,children:d})});f=c[0];return j.jsx("div",{className:(i||(i=b("stylex")))(a?!1:k.dropShadow,k.chatHeadIntroAnim),children:j.jsx(b("MWChatProfile.bs").make,{size:48,src:f,children:d})})}d=a;f.chatheadAppear=c;f.styles=k;f.make=d}),null);
__d("MWV2ChatHeadButton.bs",["CometPressable.react","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react"),j={button:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",backgroundColor:"g5ia77u1",appearance:"dwo3fsh8",width:"tmrshh9y",height:"m7zwrmfr",marginTop:"kvgmc6g5",marginEnd:"cxmmr5t8",marginBottom:"oygrvhab",marginStart:"hcukyx3x",transitionDuration:"ebpj63zs",transitionProperty:"flx89l3n",transitionTimingFunction:"msbwk0y7"},container:{position:"pmk7jnqg",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"tmrshh9y",height:"m7zwrmfr",marginBottom:"oud54xpy"}};function a(a){var c=a.children;a=a.style;return i.jsx("div",{className:(h||(h=b("stylex")))(j.container),style:a,children:c})}d={make:a};function c(a,c){var d=a.onPress,e=a.onHoverChange,f=a.onHoverIn,g=a.onHoverOut,h=a.onFocusChange,k=a.ariaLabel,l=a.ariaDescribedBy,m=a.children;a=a.testid;m={overlayDisabled:!0,xstyle:function(a){return[j.button]},children:m};k!==void 0&&(m["aria-label"]=b("bs_caml_option").valFromOption(k));k=c==null?void 0:b("bs_caml_option").some(c);k!==void 0&&(m.ref=b("bs_caml_option").valFromOption(k));a!==void 0&&(m.testid=b("bs_caml_option").valFromOption(a));e!==void 0&&(m.onHoverChange=b("bs_caml_option").valFromOption(e));f!==void 0&&(m.onHoverIn=b("bs_caml_option").valFromOption(f));g!==void 0&&(m.onHoverOut=b("bs_caml_option").valFromOption(g));h!==void 0&&(m.onFocusChange=b("bs_caml_option").valFromOption(h));d!==void 0&&(m.onPress=b("bs_caml_option").valFromOption(d));l!==void 0&&(m["aria-describedby"]=b("bs_caml_option").valFromOption(l));return i.jsx(b("CometPressable.react"),m)}e=i.forwardRef(c);f.styles=j;f.Container=d;f.make=e}),null);
__d("MWV2ChatHeadCloseButton.bs",["fbt","ix","CometPressable.react","TetraIcon.react","fbicon","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||b("react"),k={closeButton:{position:"pmk7jnqg",top:"pixltzyo",end:"aew9gpjp",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",width:"odw8uiq3",height:"jnigpg78",transform:"qpbg1qsm",opacity:"b5wmifdl",transitionDuration:"bybyf9sm",transitionProperty:"pnx7fd3z",backgroundColor:"nred35xi",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv"},visible:{transform:"g3zh7qmp",opacity:"pedkr2u6"}};function a(a){var c=a.onPress,d=a.onHoverChange,e=a.onFocusChange,f=a.isVisible;return j.jsx(b("CometPressable.react"),{"aria-label":g._(/*FBT_CALL*/"Close chat"/*FBT_CALL*/),onHoverChange:d,onFocusChange:e,onPress:c,xstyle:function(a){return[k.closeButton,f||a.focused?k.visible:!1]},children:j.jsx(b("TetraIcon.react"),{icon:b("fbicon")._(h("478231"),12)})})}c=a;f.make=c}),null);
__d("MWV2ChatHeadFlyout.bs",["fbt","CometBadge.react","LSThreadTitle.bs","Locale","MDSText.react","MWLSThreadSnippetForDisplay.bs","MWPIsThreadUnread.bs","bs_caml_option","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={container:{borderTopStartRadius:"ue3kfks5",borderTopEndRadius:"pw54ja7n",borderBottomEndRadius:"uo3d90p7",borderBottomStartRadius:"l82x9zwi",boxShadow:"clwgnc31",boxSizing:"rq0escxv",display:"j83agx80",flexDirection:"cbu4d94t",maxWidth:"dlpeemhq",minWidth:"jgsskzai",position:"pmk7jnqg",end:"cypi58rs",bottom:"i09qtzwb",backgroundColor:"nred35xi",paddingStart:"h4z51re5",paddingEnd:"rv4hoivh",height:"e5d9fub0"},containerWithSubtitle:{height:"pioscnbf"},spacer:{flexGrow:"buofh1pr"},gradientLTR:{backgroundImage:"rvdht4aw"},gradientRTL:{backgroundImage:"hv4tdetg"},openChatArrowPointer:{borderTopEndRadius:"hcy7w5mv",bottom:"s2hgh8fk",height:"gl3lb2sf",position:"pmk7jnqg",end:"b5fwa0m2",width:"hhz5lgdu"},openChatArrowPointerShadow:{boxShadow:"clwgnc31"}},l=b("Locale").isRTL(),m=l?-45:45;function a(a){var c=a.thread,d=a.subtitle;a=a.id;var e=b("MWLSThreadSnippetForDisplay.bs").make(c),f=d!==void 0;return j.jsxs("div",{"data-testid":"mw_chat_head_flyout",id:a,children:[j.jsx("div",{className:(i||(i=b("stylex")))(k.openChatArrowPointer,k.openChatArrowPointerShadow),style:{transform:"rotate("+m+"deg)"}}),j.jsxs("div",{className:i(k.container,f?k.containerWithSubtitle:!1),children:[j.jsx("div",{className:i(k.spacer)}),j.jsx("div",{"aria-hidden":!0,children:j.jsx(b("MDSText.react"),{color:"primary",type:"headlineEmphasized4",numberOfLines:1,children:j.jsx(b("LSThreadTitle.bs").make,{thread:c})})}),d!==void 0?j.jsxs(j.Fragment,{children:[j.jsx("div",{className:(i||(i=b("stylex")))(k.spacer)}),j.jsx(b("MDSText.react"),{color:"secondary",type:"headline4",numberOfLines:1,children:b("bs_caml_option").valFromOption(d)})]}):null,j.jsx("div",{className:i(k.spacer)}),j.jsxs(b("MDSText.react"),{color:"secondary",type:"body3",numberOfLines:1,children:[b("MWPIsThreadUnread.bs").isThreadUnread(c)?j.jsx(b("CometBadge.react"),{color:"blue",label:g._(/*FBT_CALL*/"Unread"/*FBT_CALL*/).toString()}):null,e]}),j.jsx("div",{className:i(k.spacer)})]}),j.jsx("div",{className:i(k.openChatArrowPointer,l?k.gradientRTL:k.gradientLTR),style:{transform:"rotate("+m+"deg)"}})]})}c=a;f.styles=k;f.isRTL=l;f.rotation=m;f.make=c}),null);
__d("MWV2ChatHeadTypingIndicator.bs",["MWChatTypingIndicator.bs","ReQL.bs","ReQLSubscription.bs","ServerTime","bs_caml_int64","bs_caml_splice_call","bs_curry","bs_int64","clearTimeout","react","setTimeout","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function i(a){var c=b("useReStore")();return b("ReQLSubscription.bs").useArray(h.useMemo(function(){return b("ReQL.bs").filter(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("typing_indicator")),{hd:a,tl:0}),function(a){return b("ServerTime").getMillis()<b("bs_caml_int64").to_float(a.expirationTimestampMs)})},[c,b("bs_int64").to_string(a)]))}function a(a){a=a.threadKey;var c=h.useState(function(){return!1}),d=c[1],e=i(a);h.useEffect(function(){b("bs_curry")._1(d,function(a){return e.length>0});var a=e.map(function(a){return b("bs_caml_int64").to_float(a.expirationTimestampMs)});a=b("bs_caml_splice_call").spliceApply(Math.max,[a]);a=a-b("ServerTime").getMillis();var c=b("setTimeout")(function(a){return b("bs_curry")._1(d,function(a){return!1})},a);return function(a){b("clearTimeout")(c)}},[d,e]);if(c[0])return h.jsx("div",{className:"n7fi1qx3 i09qtzwb jnigpg78 bsnbvmp4 taijpn5t ns4ygwem fykbt5ly hgaippwi fni8adji j83agx80 nred35xi bp9cbjyn pmk7jnqg",children:h.jsx(b("MWChatTypingIndicator.bs").make,{})});else return null}c=a;f.make=c}),null);
__d("MWV2ChatHeadUnreadMessageCountBadge.bs",["fbt","CometNumberedBadge.react","MWLSActor.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense","bs_caml","bs_int64","react","stylex","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react"),k={badgeHidden:{opacity:"b5wmifdl"},badgeShrunk:{transform:"qpbg1qsm"},unreadBadge:{end:"aew9gpjp",position:"pmk7jnqg",top:"pixltzyo",transitionDuration:"bybyf9sm",transitionProperty:"pnx7fd3z"}};function l(a){var c=b("useReStore")(),d=b("MWLSActor.bs").useActor(void 0),e=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(c.table("threads")),{hd:a,tl:0}),function(e){var f;return b("ReQLSuspense").toArray((f=b("ReQL.bs")).filter(f.bounds(f.take(f.getKeyRange(f.fromTableDescending(c.table("messages")),{hd:a,tl:0}),20),{NAME:"greaterThan",VAL:{hd:e.lastReadWatermarkTimestampMs,tl:0}}),function(a){return b("bs_caml").i64_neq(a.senderId,d)})).length})},[c,b("bs_int64").to_string(d),b("bs_int64").to_string(a)]));if(e!==void 0)return e;else return 0}function a(a){var c=a.threadKey;a=a.isVisible;c=l(c);if(c>0)return j.jsx("div",{"aria-label":g._(/*FBT_CALL*/{"*":"{number} unread messages","_1":"1 unread message"}/*FBT_CALL*/,[g._plural(c,"number")]),className:(i||(i=b("stylex")))(k.unreadBadge,a?!1:k.badgeHidden),children:j.jsx(b("CometNumberedBadge.react"),{value:c})});else return j.jsx("div",{"aria-hidden":!0,className:(i||(i=b("stylex")))(k.badgeHidden,k.badgeShrunk)})}c=a;f.make=c}),null);
__d("MWV2ChatHead.bs",["fbt","CometContextualLayer.react","LSMediaUrl.bs","MWCMInboxHeaderCommunityGroupName.bs","MWCMThreadTypes.bs","MWChatHeadPicture.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatStateV2IsFlyoutOpen.bs","MWChatViewerChatVisibilityHook","MWFacepileBadge.bs","MWFacepileGetContactsToShow.bs","MWLSActor.bs","MWPGetThreadTitle.bs","MWV2ChatHeadButton.bs","MWV2ChatHeadCloseButton.bs","MWV2ChatHeadFlyout.bs","MWV2ChatHeadTypingIndicator.bs","MWV2ChatHeadUnreadMessageCountBadge.bs","MWV2EnsureThatChatTabExists.bs","MWV2PreloadThread.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense","SortedAsyncIterable.bs","bs_belt_Option","bs_caml_option","bs_curry","bs_int64","gkx","profilePhotoUtils","react","stylex","useCometUniqueID","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||b("react");function k(a,c){var d=b("MWLSActor.bs").useActor(void 0),e=a.threadName;if(e!==void 0)return g._(/*FBT_CALL*/"Open chat titled {name of conversation}"/*FBT_CALL*/,[g._param("name of conversation",e)]).toString();e=b("bs_belt_Option").getWithDefault(b("MWPGetThreadTitle.bs").computeThreadTitle(void 0,a,c,d),"");return g._(/*FBT_CALL*/"Open chat with {chat participants}"/*FBT_CALL*/,[g._param("chat participants",e)])}function l(a,c){var d=b("MWLSActor.bs").useActor(void 0),e=b("LSMediaUrl.bs").Thread.threadPictureUrl(a);if(e!==void 0)return[e];else return b("MWFacepileGetContactsToShow.bs").getContactsToShow(a,c,d).map(function(a){return b("LSMediaUrl.bs").Contact.profilePictureUrl(a)})}var m={activeBadge:{position:"pmk7jnqg"}};function n(a){var c=a.thread,d=a.tab,e=a.style,f=a.onHoverChange,g=a.onFocusChange,h=b("useReStore")(),n=b("MWChatStateV2.bs").useDispatch(void 0);a=function(a){return b("bs_curry")._1(n,b("MWChatStateActions.bs").maximizeTab(Date.now(),d.tabId))};var o=c.threadKey,p=j.useState(function(){return!1}),q=p[1];p=p[0];var r=j.useState(function(){return!1}),s=r[1];r=r[0];var t=function(a){return b("bs_curry")._1(n,b("MWChatStateActions.bs").closeTab(Date.now(),d.tabId))},u=b("ReQLSuspense").useArray(function(){var a;return(a=b("ReQL.bs")).take(a.leftJoin(a.getKeyRange(a.fromTableAscending(h.table("participants")),{hd:c.threadKey,tl:0}),a.fromTableAscending(h.table("contacts"))),8)},[c.threadKey]),v=j.useRef(null),w=b("MWChatStateV2IsFlyoutOpen.bs").isFlyoutOpen(d),x=b("MWChatViewerChatVisibilityHook")(),y=b("useCometUniqueID")(),z=k(c,u);u=u.map(function(a){return a[1]});u=l(c,u);var A=b("profilePhotoUtils").getBadgeSizeAndStrokeWidth(48),B=b("profilePhotoUtils").getBadgePosition(24),C=b("MWV2PreloadThread.bs").useHook(o),D=b("MWCMThreadTypes.bs").isJoinedCMThread(c.threadType);D=D?b("bs_caml_option").some(j.jsx(b("MWCMInboxHeaderCommunityGroupName.bs").make,{thread:c})):void 0;return j.jsxs(b("MWV2ChatHeadButton.bs").Container.make,{children:[j.jsxs(b("MWV2ChatHeadButton.bs").make,{onPress:a,onHoverChange:function(a){b("bs_curry")._1(q,function(b){return a});return b("bs_curry")._1(f,a)},onHoverIn:C[0],onHoverOut:C[1],onFocusChange:function(a){b("bs_curry")._1(s,function(b){return a});return b("bs_curry")._1(g,a)},ariaLabel:z,ariaDescribedBy:y,children:[j.jsx("div",{ref:v,children:j.jsxs(b("MWChatHeadPicture.bs").make,{images:u,children:[j.jsx(b("MWV2ChatHeadUnreadMessageCountBadge.bs").make,{threadKey:o,isVisible:!p&&!r}),j.jsx("div",{className:(i||(i=b("stylex")))(m.activeBadge),style:{bottom:B.bottom,left:B.left,right:B.right,transform:B.transform},children:j.jsx(b("MWFacepileBadge.bs").make,{thread:c,size:A[0]})})]})}),p||r||w?j.jsx(b("CometContextualLayer.react"),{contextRef:v,children:j.jsx(b("MWV2ChatHeadFlyout.bs").make,{thread:c,subtitle:D,id:y})}):null,x&&b("gkx")("1774069")?j.jsx(b("MWV2ChatHeadTypingIndicator.bs").make,{threadKey:o}):null]}),j.jsx(b("MWV2ChatHeadCloseButton.bs").make,{onPress:t,onHoverChange:function(a){return b("bs_curry")._1(q,function(b){return a})},onFocusChange:function(a){return b("bs_curry")._1(s,function(b){return a})},isVisible:p||r})],style:e})}c={make:n};function a(a){var c=a.threadKeyDescriptor,d=a.tab,e=a.style,f=a.onHoverChange;a=a.onFocusChange;var g=b("useReStore")(),h=c.clientThreadKey,i=c.threadKey,k=b("bs_int64").to_string(i),l=JSON.stringify(h);b("MWV2EnsureThatChatTabExists.bs").useHook(i,c.threadType);c=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(g.table("threads")),{hd:i,tl:0})},[g,k]));k=b("ReQLSubscription.bs").useFirst(j.useMemo(function(){if(h!==void 0)return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromIndexAscending(g.table("threads").index("clientThreadKey")),{hd:h,tl:0});else return b("SortedAsyncIterable.bs").empty(void 0)},[g,l]));l=c!==void 0?c:k!==void 0?k:void 0;if(l!==void 0)return j.jsx(n,{thread:l,tab:d,style:e,onHoverChange:f,onFocusChange:a});else return null}d=a;f.styles=m;f.Impl=c;f.make=d}),null);/*FB_PKG_DELIM*/
__d("LSVerifyContactRowExists",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[],f;return c.seq([function(e){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(e){var g=e.done;e.value;return g?c.seq([function(b){return d[0]=a[3]==null?"":a[3],c.fe(c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])&&c.i64.lt(b.authorityLevel,a[14])}),function(a){return a["delete"]()})},function(b){return c.db.table(7).add({id:a[0],profilePictureUrl:a[2]==null?"":a[2],profilePictureFallbackUrl:a[5],name:d[0],secondaryName:a[20],normalizedNameForSearch:d[0],isMemorialized:a[9],blockedByViewerStatus:a[11],canViewerMessage:a[12],profilePictureLargeUrl:"",isMessengerUser:!0,rank:0,contactType:a[4],contactTypeExact:[0,0],requiresMultiway:!1,authorityLevel:a[14],workForeignEntityType:[0,0],capabilities:a[15],capabilities2:a[16],contactViewerRelationship:a[19],gender:a[18]})},function(e){return d[1]=new c.Map(),d[1].set("contact_id",a[0]),d[2]=c.toJSON(d[1]),c.sp(b("LSIssueNewTask"),"cpq_v2",[0,207],d[2],f,f,[0,0],[0,0],f,f,[0,0])}]):0})},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSComputeParticipantCapabilities",["LSGetViewerFBID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(f){return c.seq([function(a){return c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.ftr(c.db.table(14).fetch([[[a[1],d[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,d[0])}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[!1,!1],d[1]=c[0],d[2]=c[1],c):(b=a.item,c=[b.isAdmin==null?!1:b.isAdmin,b.isModerator],d[1]=c[0],d[2]=c[1],c)})},function(b){return c.ftr(c.db.table(14).fetch([[[a[1],a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[1])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[0])}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[!1,!1],d[4]=c[0],d[5]=c[1],c):(b=a.item,c=[b.isAdmin==null?!1:b.isAdmin,b.isModerator],d[4]=c[0],d[5]=c[1],c)})},function(b){return c.ftr(c.db.table(7).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.id,a[0])&&c.i64.eq([0,1],[0,1])}).next().then(function(a,b){var c=a.done;a=a.value;return c?(c=[[0,1073741823],[0,0],!1],d[7]=c[0],d[8]=c[1],d[9]=c[2],c):(b=a.item,c=[b.capabilities==null?[0,1073741823]:b.capabilities,b.contactTypeExact==null?[0,0]:b.contactTypeExact,b.isManagedByViewer==null?!1:b.isManagedByViewer],d[7]=c[0],d[8]=c[1],d[9]=c[2],c)})},function(a){return d[12]=c.i64.eq(d[8],[0,4])?d[9]?[0,2612119]:c.i64.or_([0,2612119],c.i64.lsl_([0,1],c.i64.to_int32([0,3]))):d[7],c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[11]=a[0],a})},function(e){return d[13]=c.i64.lsl_([0,1],c.i64.to_int32([0,20])),d[15]=d[1]&&!d[4]&&c.i64.neq(d[11],a[0])?d[12]:c.i64.eq(c.i64.and_(d[12],d[13]),[0,0])?d[12]:c.i64.sub(d[12],d[13]),c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[14]=a[0],a})},function(e){return d[16]=c.i64.lsl_([0,1],c.i64.to_int32([0,22])),d[19]=d[4]&&d[1]&&c.i64.neq(d[14],a[0])?d[15]:c.i64.eq(c.i64.and_(d[15],d[16]),[0,0])?d[15]:c.i64.sub(d[15],d[16]),d[2]?d[17]=!(d[4]||d[5]):d[17]=!0,c.sp(b("LSGetViewerFBID")).then(function(a){return a=a,d[18]=a[0],a})},function(b){return d[20]=c.i64.lsl_([0,1],c.i64.to_int32([0,21])),e[0]=(d[1]||d[2])&&d[17]&&c.i64.neq(a[0],d[18])?d[19]:c.i64.eq(c.i64.and_(d[19],d[20]),[0,0])?d[19]:c.i64.sub(d[19],d[20])}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSAddParticipantIdToGroupThread",["LSComputeParticipantCapabilities"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1];c.n;var d=[],e=[];return c.seq([function(e){return c.seq([function(e){return c.sp(b("LSComputeParticipantCapabilities"),a[1],a[0]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.ftr(c.db.table(14).fetch([[[a[0],a[1]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&c.i64.eq([0,0],[0,0])&&c.i64.eq(b.contactId,a[1])&&c.i64.gt(b.authorityLevel,a[9])}).next().then(function(b){var e=b.done;b.value;return e?c.db.table(14).put({threadKey:a[0],contactId:a[1],readWatermarkTimestampMs:a[2],readActionTimestampMs:a[3],deliveredWatermarkTimestampMs:a[4],nickname:a[5],normalizedSearchTerms:a[10],isAdmin:a[6],isSuperAdmin:a[11],subscribeSource:a[7],authorityLevel:a[9],participantCapabilities:d[0],groupParticipantJoinState:[0,0],isModerator:!1}):0})}])},function(a){return c.resolve(e)}])}e.exports=a}),null);
__d("LSUpsertReaction",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1];b.n;var c=[];return b.seq([function(c){return b.db.table(8).put({threadKey:a[0],messageId:a[2],actorId:a[3],timestampMs:a[1],reaction:a[4],authorityLevel:a[5]})},function(a){return b.resolve(c)}])}e.exports=a}),null);
__d("MWCMInboxHeaderCommunityGroupName.bs",["fbt","MWCMThreadTypes.bs","MWCMUseFolder.bs","bs_caml_obj","bs_curry","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||b("react");function j(a){return a}function a(a){var c=a.thread;a=a.renderWrapper;a=a!==void 0?a:j;var d=b("MWCMUseFolder.bs").useHook(c);if(d===void 0)return null;var e=b("bs_caml_obj").caml_equal(c.cannotReplyReason,"broadcast_chat_read_only");if(b("MWCMThreadTypes.bs").isBroadcastThread(c.threadType)&&!e)return b("bs_curry")._1(a,g._(/*FBT_CALL*/"View only for members"/*FBT_CALL*/));else return i.jsx(i.Fragment,{children:b("bs_curry")._1(a,d.name)})}c=a;f.defaultRenderWrapper=j;f.make=c}),null);
__d("MWChatTypingIndicator.bs",["react","stylex"],(function(a,b,c,d,e,f){"use strict";var g,h,i=g||b("react");c="rqt66bd7-B";d="j24gs3ss-B";var j={root:{alignItems:"bp9cbjyn",display:"j83agx80",height:"kmzbrmfl"},dot:{animationName:"d75kxgp9",animationDuration:"kv069q7b",animationIterationCount:"ee40wjg4",animationTimingFunction:"rr7aif1o",borderTopStartRadius:"s8bnoagg",borderTopEndRadius:"bn9qtmzc",borderBottomEndRadius:"hp05c5td",borderBottomStartRadius:"b6jg2yqc",display:"q9uorilb",height:"mw227v9j",marginEnd:"ditlmg2l",marginStart:"nvdbi5me",width:"loos5mxf",backgroundColor:"aph9nnby"},dot1:{animationDelay:"tv4077gy"},dot2:{animationDelay:"oeefd0zo"},dot3:{animationDelay:"dg03pwpq"},dotOpacity:{animation:"lgewrz6a",animationDuration:"kv069q7b",animationIterationCount:"ee40wjg4",animationTimingFunction:"rr7aif1o",opacity:"pedkr2u6"},dot1Opacity:{animationDelay:"iiswpqb6"},dot2Opacity:{animationDelay:"ar9bh3uw"},dot3Opacity:{animationDelay:"gnihhqrp"}};function a(a){return i.jsxs("div",{className:(h||(h=b("stylex")))(j.root),children:[i.jsx("div",{className:h(j.dotOpacity,j.dot1Opacity),children:i.jsx("div",{className:h(j.dot,j.dot1)})}),i.jsx("div",{className:h(j.dotOpacity,j.dot2Opacity),children:i.jsx("div",{className:h(j.dot,j.dot2)})}),i.jsx("div",{className:h(j.dotOpacity,j.dot3Opacity),children:i.jsx("div",{className:h(j.dot,j.dot3)})})]})}e=a;f.dotAnimation=c;f.opacityAnimation=d;f.styles=j;f.make=e}),null);
__d("LSContactIdType.bs",["bs_caml_int64"],(function(a,b,c,d,e,f){"use strict";a=b("bs_caml_int64").zero;c=b("bs_caml_int64").one;d=[0,2];f.unknown=a;f.fbid=c;f.smsLocalId=d}),null);
__d("MWV2EnsureThatChatTabExists.bs",["LS.bs","LSAuthorityLevel.bs","LSContactBlockedByViewerStatus.bs","LSContactGender.bs","LSContactIdType.bs","LSContactType.bs","LSContactViewerRelationship.bs","LSContactWorkForeignEntityType.bs","LSDatabaseType.bs","LSMessagingThreadTypeUtil.bs","LSTransaction.bs","LSVerifyContactRowExists","LSVerifyThreadRowExists","Promise","bs_curry","cr:2889","promiseDone","react","useReStore"],(function(a,b,c,d,e,f){"use strict";var g,h=g||b("react");function a(a,c){var d=b("useReStore")();h.useEffect(function(){var e=function(e){if(b("LSMessagingThreadTypeUtil.bs").isOneToOne(c))return b("LSTransaction.bs").run(d,function(c){return b("LSVerifyContactRowExists")(a,b("LSContactIdType.bs").fbid,void 0,void 0,b("LSContactType.bs").user,void 0,void 0,void 0,void 0,!1,!1,b("LSContactBlockedByViewerStatus.bs").unblocked,void 0,!1,b("LSAuthorityLevel.bs").clientPartial,void 0,void 0,b("LSContactWorkForeignEntityType.bs").unknown,b("LSContactGender.bs").unknown,b("LSContactViewerRelationship.bs").unknown,void 0,b("LS.bs").make(c))},"readWrite");else return b("Promise").resolve(void 0)};b("promiseDone")(e(void 0).then(function(e){return!(b("cr:2889")==null)&&b("LSMessagingThreadTypeUtil.bs").isSecure(c)?b("bs_curry")._2(b("cr:2889").call,d,a):b("LSTransaction.bs").run(d,function(d){return b("LSVerifyThreadRowExists")(a,c,b("LSDatabaseType.bs").mailbox,b("LS.bs").make(d))},"readWrite")}),void 0,void 0)},[d,JSON.stringify(a),JSON.stringify(c)])}c=b("cr:2889");f.$MAWVerifyExistingThreadExists$requireCondXplat=b("cr:2889");f.mawVerifyExistingThreadExists=c;f.useHook=a}),null);/*FB_PKG_DELIM*/
__d("useGenericErrorDialog",["fbt","react","useCometAlertDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i=d("react").useCallback;function a(){var a=c("useCometAlertDialog")();return i(function(b){var c;a({body:(c=b==null?void 0:b.body)!=null?c:h._(/*FBT_CALL*/"Something went wrong. Please try again."/*FBT_CALL*/),close:h._(/*FBT_CALL*/"OK"/*FBT_CALL*/),title:(c=b==null?void 0:b.title)!=null?c:h._(/*FBT_CALL*/"Error"/*FBT_CALL*/)})},[a])}g["default"]=a}),98);
__d("MWV2ChatOverflowHead.bs",["fbt","ix","BaseGlimmer.react","CometContextualLayer.react","CometListCellGlimmer.react","CometMenuItemBase.react","CometTextWithEntities.react","LSMediaUrl.bs","LSThreadTitle.bs","MDSText.react","MWChatHeadPicture.bs","MWChatStateActions.bs","MWChatStateV2.bs","MWChatTextTransform.bs","MWFacepileGetContactsToShow.bs","MWLSActor.bs","MWMenu.react","MWV2ChatHeadButton.bs","MWV2EnsureThatChatTabExists.bs","ReQL.bs","ReQLSubscription.bs","ReQLSuspense","TetraIcon.react","bs_belt_Option","bs_caml","bs_caml_array","bs_curry","fbicon","react","recoverableViolation","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||b("react");function l(a){var c=b("MWLSActor.bs").useActor(void 0),d=b("useReStore")();return b("bs_belt_Option").getWithDefault(b("ReQLSubscription.bs").useFirst(k.useMemo(function(){return b("ReQL.bs").map(b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:a,tl:0}),function(e){var f;return b("ReQLSuspense").toArray((f=b("ReQL.bs")).filter(f.bounds(f.take(f.getKeyRange(f.fromTableDescending(d.table("messages")),{hd:a,tl:0}),20),{NAME:"greaterThan",VAL:{hd:e.lastReadWatermarkTimestampMs,tl:0}}),function(a){return b("bs_caml").i64_neq(a.senderId,c)})).length})},[d,JSON.stringify(c),JSON.stringify(a)])),0)}function m(a){a=a.thread;var c=l(a.threadKey);return k.jsxs(k.Fragment,{children:[k.jsx(b("LSThreadTitle.bs").make,{thread:a}),k.jsx(b("CometTextWithEntities.react"),{text:g._(/*FBT_CALL*/"({unread message count})"/*FBT_CALL*/,[g._param("unread message count",String(c))]),transforms:b("MWChatTextTransform.bs").epdTextTransforms})]})}c={useUnreadCount:l,make:m};var n={auxWrapper:{display:"j83agx80",visibility:"kr9hpln1"},auxVisible:{visibility:"n1dktuyu"},glimmer:{height:"tv7at329",minWidth:"gvsi1rru"}};function o(a){var c=a.isItemHovered,d=a.setItemIsHovered;a=a.closeTab;return k.jsx("div",{className:(j||(j=b("stylex")))(n.auxWrapper,c?n.auxVisible:!1),children:k.jsx(b("TetraIcon.react"),{"aria-label":g._(/*FBT_CALL*/"Close chat"/*FBT_CALL*/),icon:b("fbicon")._(h("478231"),12),onPress:a,onHoverIn:function(a){return b("bs_curry")._1(d,function(a){return!0})},onHoverOut:function(a){return b("bs_curry")._1(d,function(a){return!1})},color:"secondary"})})}d={styles:n,make:o};var p={glimmer:{height:"tv7at329",minWidth:"gvsi1rru"}};function q(a){var c=a.descriptor,d=a.tab,e=a.setParentHoverState,f=b("useReStore")();a=b("ReQLSubscription.bs").useFirst(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(f.table("threads")),{hd:c.threadKey,tl:0})},[f,JSON.stringify(c.threadKey)]));var g=b("MWChatStateV2.bs").useDispatch(void 0);b("MWV2EnsureThatChatTabExists.bs").useHook(c.threadKey,c.threadType);var h=k.useState(function(){return!1}),i=h[1];if(a!==void 0)return k.jsx(b("CometMenuItemBase.react"),{primaryText:k.jsx(m,{thread:a}),onClick:function(a){b("bs_curry")._1(e,function(a){return!1});return b("bs_curry")._1(g,b("MWChatStateActions.bs").maximizeTab(Date.now(),d.tabId))},onHoverIn:function(a){return b("bs_curry")._1(i,function(a){return!0})},onHoverOut:function(a){return b("bs_curry")._1(i,function(a){return!1})},aux:k.jsx(o,{tab:d,isItemHovered:h[0],setItemIsHovered:i,closeTab:function(a){return b("bs_curry")._1(g,b("MWChatStateActions.bs").closeTab(Date.now(),d.tabId))}})});else return k.jsx("div",{className:(j||(j=b("stylex")))(p.glimmer),children:k.jsx(b("CometListCellGlimmer.react"),{imageStyle:"none"})})}e={styles:p,make:q};function r(a){var c=a.excessHeads,d=a.setParentHoverState;return k.jsx(b("MWMenu.react"),{children:c.map(function(a){var c=a.tabType;if(c.TAG!==0)return k.jsx(q,{descriptor:c._0,tab:a,setParentHoverState:d},String(a.tabId));b("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_product");return null}),size:"full",truncate:!0,withArrow:!0})}var s={make:r},t={overflowCount:{position:"pmk7jnqg",width:"tmrshh9y",height:"m7zwrmfr",borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",top:"kr520xx4",display:"j83agx80",alignItems:"bp9cbjyn",justifyContent:"taijpn5t",backgroundColor:"d6rk862h"}};function u(a){var c=a.thread;a=a.count;c=b("MWFacepileGetContactsToShow.bs").useHook(c).map(function(a){return b("LSMediaUrl.bs").Contact.profilePictureUrl(a)});return k.jsx(b("MWChatHeadPicture.bs").make,{images:c,children:k.jsx("div",{className:(j||(j=b("stylex")))(t.overflowCount),children:k.jsx(b("MDSText.react"),{color:"white",type:"bodyLink3",children:g._(/*FBT_CALL*/"+{chat count}"/*FBT_CALL*/,[g._param("chat count",String(a))])})}),noFacepile:!0,noDropShadow:!0})}var v={styles:t,make:u},w={glimmer:{borderTopStartRadius:"s45kfl79",borderTopEndRadius:"emlxlaya",borderBottomEndRadius:"bkmhp75w",borderBottomStartRadius:"spb7xbtv",width:"k4urcfbm",height:"datstx6m"}};function x(a){var c=a.tab;a=a.count;b("MWV2EnsureThatChatTabExists.bs").useHook(c.threadKey,c.threadType);var d=b("useReStore")(),e=b("ReQLSubscription.bs").useFirst(k.useMemo(function(){return b("ReQL.bs").getKeyRange(b("ReQL.bs").fromTableAscending(d.table("threads")),{hd:c.threadKey,tl:0})},[d,JSON.stringify(c.threadKey)]));if(e!==void 0)return k.jsx(u,{thread:e,count:a});else return k.jsx(b("BaseGlimmer.react"),{theme:"dark",index:1,xstyle:w.glimmer})}var y={styles:w,make:x};function a(a){var c=a.style,d=a.excessHeads,e=a.onHoverChange;a=k.useState(function(){return!1});var f=a[1],h=d.length,i=k.useRef(null);if(h<=0)return null;var j=b("bs_caml_array").get(d,0).tabType,l;j.TAG===0?(b("recoverableViolation")("Compose tab shouldn't be part of excess tabs","messenger_web_product"),l=null):l=k.jsx(x,{tab:j._0,count:h});return k.jsx(b("MWV2ChatHeadButton.bs").Container.make,{children:k.jsx(b("MWV2ChatHeadButton.bs").make,{ariaLabel:g._(/*FBT_CALL*/"+{chat count} additional chats"/*FBT_CALL*/,[g._param("chat count",String(h))]),children:k.jsxs("div",{onMouseEnter:function(a){b("bs_curry")._1(f,function(a){return!0});return b("bs_curry")._1(e,!0)},onMouseLeave:function(a){b("bs_curry")._1(f,function(a){return!1});return b("bs_curry")._1(e,!1)},children:[l,a[0]?k.jsx(b("CometContextualLayer.react"),{align:"middle",position:"end",contextRef:i,children:k.jsx(r,{excessHeads:d,setParentHoverState:f})}):null]}),ref:i}),style:c})}a=a;f.MenuItemTitle=c;f.CloseButton=d;f.MenuItem=e;f.HoverMenu=s;f.Facepile=v;f.FirstThreadPicture=y;f.make=a}),null);
__d("CometHelpDeleteAccountRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7093745907363955"}),null);
__d("GroupsCometAdminAutonomyRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7495722840469872"}),null);
__d("GroupsCometAppsSettingsDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5009174695798895"}),null);
__d("GroupsCometSubgroupRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5430322500333521"}),null);
__d("GroupsCometViewerContentFlaggedRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5454904811220323"}),null);
__d("LWICometAppInstallCreationRootContentQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7275272799211650"}),null);
__d("LWICometCallNowCreationRootContentQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4783572475085960"}),null);
__d("MarketplaceCometRelistMultipleItemsDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5344523892239467"}),null);